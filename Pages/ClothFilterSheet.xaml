<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:components="clr-namespace:OMS.Components"
    x:Class="OMS.Pages.ClothFilterSheet"
    BackgroundColor="#80000000">
    
    <Grid>
        <Grid.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnBackgroundTapped"/>
        </Grid.GestureRecognizers>
        
        <Border BackgroundColor="White"
                StrokeThickness="0"
                VerticalOptions="End"
                HorizontalOptions="Fill"
                x:Name="FilterSheet">
            <Border.GestureRecognizers>
                <TapGestureRecognizer />
            </Border.GestureRecognizers>
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="16,16,0,0" />
            </Border.StrokeShape>
            
            <VerticalStackLayout Padding="24,16" Spacing="20">
                <!-- Handle Bar -->
                <BoxView WidthRequest="40"
                         HeightRequest="4"
                         CornerRadius="2"
                         BackgroundColor="{StaticResource Gray300}"
                         HorizontalOptions="Center"/>
                
                <!-- Header -->
                <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,8">
                    <Label Grid.Column="0"
                           Text="Filter Cloths" 
                           FontSize="20"
                           FontAttributes="Bold" 
                           TextColor="{StaticResource Gray900}"/>
                    <Button Grid.Column="1"
                            Text="Clear All"
                            FontSize="14"
                            TextColor="{StaticResource Gray900}"
                            BackgroundColor="Transparent"
                            Clicked="OnClearAllClicked"/>
                </Grid>
                
				<components:InputField Label="Search"
					  Text=""
					  Placeholder="Search by name, color or code..."
		              x:Name="SearchEntry" />
                
                <!-- Color Filter -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Filter by Color"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Gray700}"/>
                    <Border Padding="12,8"
                            BackgroundColor="{StaticResource Gray50}"
                            StrokeThickness="1"
                            Stroke="{StaticResource Gray200}">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="8" />
                        </Border.StrokeShape>
                        <Picker x:Name="ColorPicker"
                                Title="Select Color"
                                BackgroundColor="Transparent"/>
                    </Border>
                </VerticalStackLayout>
                
                <!-- Low Stock Toggle -->
                <Grid ColumnDefinitions="*,Auto">
                    <VerticalStackLayout Grid.Column="0" Spacing="4">
                        <Label Text="Low Stock Only"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Gray700}"/>
                        <Label Text="Show cloths with less than 20% remaining"
                               FontSize="12"
                               TextColor="{StaticResource Gray500}"/>
                    </VerticalStackLayout>
                    <Switch Grid.Column="1"
                            x:Name="LowStockSwitch"
                            VerticalOptions="Center"
                            OnColor="{StaticResource Primary}"/>
                </Grid>
                
                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="12" Margin="0,12,0,8">
                    <Button Grid.Column="0"
                            Text="Cancel"
                            Clicked="OnCancelClicked"
                            BackgroundColor="{StaticResource Gray100}"
                            TextColor="{StaticResource Gray900}"
                            CornerRadius="12"
                            HeightRequest="48"/>
                    <Button Grid.Column="1"
                            Text="Apply Filters"
                            Clicked="OnApplyClicked"
                            Background="{StaticResource PurplePinkGradient}"
                            TextColor="{StaticResource White}"
                            CornerRadius="12"
                            HeightRequest="48"/>
                </Grid>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>
