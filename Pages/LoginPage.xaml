<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:components="clr-namespace:OMS.Components"
    x:Class="OMS.Pages.LoginPage"
    Shell.NavBarIsVisible="False"
    NavigationPage.HasNavigationBar="False"
    BackgroundColor="{StaticResource Purple600}"
    Shell.TabBarIsVisible="False">

    <ContentPage.Resources>
        <ResourceDictionary>
            <LinearGradientBrush x:Key="LoginGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#a855f7" Offset="0.0" />
                <GradientStop Color="#ec4899" Offset="0.5" />
                <GradientStop Color="#f97316" Offset="1.0" />
            </LinearGradientBrush>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid Background="{StaticResource LoginGradient}">
        <ScrollView>
            <VerticalStackLayout VerticalOptions="Center" Padding="24" Spacing="0">
                <!-- Login Card -->
                <Border BackgroundColor="{StaticResource White}" 
                        StrokeThickness="0"
                        Padding="32,40"
                        MaximumWidthRequest="400"
                        HorizontalOptions="Center"
                        WidthRequest="340">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="{StaticResource Gray900}"
                                Opacity="0.15"
                                Radius="30"
                                Offset="0,10" />
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="24">
                        <!-- Logo/Icon -->
                        <VerticalStackLayout HorizontalOptions="Center" Spacing="12">
                            <Border WidthRequest="56" 
                                    HeightRequest="56" 
                                    Padding="0"
                                    Background="{StaticResource PurplePinkGradient}"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="28" />
                                </Border.StrokeShape>
                                <Label Text="&#x1F464;" 
                                       FontSize="28" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <Label Text="Cloth Shop Manager" 
                                   FontSize="20" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource Gray900}"
                                   HorizontalOptions="Center"/>
                            <Label Text="Sign in to continue" 
                                   FontSize="13" 
                                   TextColor="{StaticResource Gray500}"
                                   HorizontalOptions="Center"
                                   Margin="0,-6,0,0"/>
                        </VerticalStackLayout>

                        <!-- Role Selection -->
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="5">
                            <!-- Admin Role -->
                            <Grid Grid.Column="0" 
                                  ColumnDefinitions="Auto,*" 
                                  ColumnSpacing="0"
                                  BackgroundColor="Transparent">
                                <RadioButton Grid.Column="0" 
                                             GroupName="Role" 
                                             Value="admin" 
                                             IsChecked="{Binding IsAdminSelected}"/>
                                <Label Text="Admin" 
                                       Grid.Column="1" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource Gray900}"
                                       VerticalOptions="Center"/>
                            </Grid>

                            <!-- Maker Role -->
                            <Grid Grid.Column="1" 
                                  ColumnDefinitions="Auto,*" 
                                  ColumnSpacing="0"
                                  BackgroundColor="Transparent">
                                <RadioButton Grid.Column="0" 
                                             GroupName="Role" 
                                             Value="maker" 
                                             IsChecked="{Binding IsMakerSelected}"/>
                                <Label Text="Maker/Tailor" 
                                       Grid.Column="1" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource Gray900}"
                                       VerticalOptions="Center"/>
                            </Grid>                            
                            
                        </Grid>

                        <!-- Username and Password -->
                        <VerticalStackLayout Spacing="16">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="Username" 
                                       FontSize="13" 
                                       TextColor="{StaticResource Gray600}"/>
                                <Entry Text="{Binding Username}" 
                                       Placeholder="Enter your username"
                                       PlaceholderColor="{StaticResource Gray400}"
                                       BackgroundColor="Transparent"
                                       FontSize="15"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Spacing="8">
                                <Label Text="Password" 
                                       FontSize="13" 
                                       TextColor="{StaticResource Gray600}"/>
                                <Entry Text="{Binding Password}" 
                                       Placeholder="Enter your password"
                                       PlaceholderColor="{StaticResource Gray400}"
                                       IsPassword="True"
                                       BackgroundColor="Transparent"
                                       FontSize="15"/>
                            </VerticalStackLayout>
                        </VerticalStackLayout>

                        <!-- Login Button -->
                        <Button Text="{Binding SignInButtonText}" 
                                Command="{Binding LoginCommand}"
                                Background="{StaticResource PurplePinkGradient}"
                                TextColor="{StaticResource White}"
                                FontSize="15"
                                FontAttributes="Bold"
                                HeightRequest="48"
                                CornerRadius="8"
                                Margin="0,8,0,0"/>

                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
