<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="OMS.Pages.LoginPage"
    Shell.NavBarIsVisible="False"
    NavigationPage.HasNavigationBar="False"
    BackgroundColor="{StaticResource Purple600}"
    Shell.TabBarIsVisible="False">

    <ContentPage.Resources>
        <ResourceDictionary>
            <LinearGradientBrush x:Key="LoginGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#a855f7" Offset="0.0" />
                <GradientStop Color="#ec4899" Offset="0.5" />
                <GradientStop Color="#f97316" Offset="1.0" />
            </LinearGradientBrush>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid Background="{StaticResource LoginGradient}">
        <ScrollView>
            <VerticalStackLayout VerticalOptions="Center" Padding="24" Spacing="0">
                <!-- Login Card -->
                <Border BackgroundColor="{StaticResource White}" 
                        StrokeThickness="0"
                        Padding="32,40"
                        MaximumWidthRequest="400"
                        HorizontalOptions="Center"
                        WidthRequest="340">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20" />
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="{StaticResource Gray900}"
                                Opacity="0.15"
                                Radius="30"
                                Offset="0,10" />
                    </Border.Shadow>
                    <VerticalStackLayout Spacing="24">
                        <!-- Logo/Icon -->
                        <VerticalStackLayout HorizontalOptions="Center" Spacing="12">
                            <Border WidthRequest="56" 
                                    HeightRequest="56" 
                                    Padding="0"
                                    Background="{StaticResource PurplePinkGradient}"
                                    StrokeThickness="0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="28" />
                                </Border.StrokeShape>
                                <Label Text="&#x1F464;" 
                                       FontSize="28" 
                                       HorizontalOptions="Center" 
                                       VerticalOptions="Center"/>
                            </Border>
                            <Label Text="Cloth Shop Manager" 
                                   FontSize="20" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource Gray900}"
                                   HorizontalOptions="Center"/>
                            <Label Text="Sign in to continue" 
                                   FontSize="13" 
                                   TextColor="{StaticResource Gray500}"
                                   HorizontalOptions="Center"
                                   Margin="0,-6,0,0"/>
                        </VerticalStackLayout>

                        <!-- Role Selection -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Select Role" 
                                   FontSize="13" 
                                   FontAttributes="Bold" 
                                   TextColor="{StaticResource Gray900}"
                                   Margin="0,0,0,4"/>
                            
                            <!-- Admin Role -->
                            <Border StrokeThickness="1"
                                    Stroke="{Binding AdminBorderColor}" 
                                    BackgroundColor="{Binding AdminBackgroundColor}"
                                    Padding="16">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding SelectRoleCommand}" CommandParameter="admin"/>
                                </Border.GestureRecognizers>
                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                                    <Ellipse Grid.Column="0"
                                             WidthRequest="8"
                                             HeightRequest="8"
                                             Fill="{StaticResource Gray900}"
                                             VerticalOptions="Center"/>
                                    <VerticalStackLayout Grid.Column="1" Spacing="2">
                                        <Label Text="Admin" 
                                               FontSize="15" 
                                               FontAttributes="Bold" 
                                               TextColor="{StaticResource Gray900}"/>
                                        <Label Text="Full access to all features" 
                                               FontSize="12" 
                                               TextColor="{StaticResource Gray600}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>

                            <!-- Maker Role -->
                            <Border StrokeThickness="1"
                                    Stroke="{Binding MakerBorderColor}" 
                                    BackgroundColor="{Binding MakerBackgroundColor}"
                                    Padding="16">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="8" />
                                </Border.StrokeShape>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding SelectRoleCommand}" CommandParameter="maker"/>
                                </Border.GestureRecognizers>
                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                                    <Ellipse Grid.Column="0"
                                             WidthRequest="8"
                                             HeightRequest="8"
                                             Fill="{StaticResource Gray900}"
                                             VerticalOptions="Center"/>
                                    <VerticalStackLayout Grid.Column="1" Spacing="2">
                                        <Label Text="Maker/Tailor" 
                                               FontSize="15" 
                                               FontAttributes="Bold" 
                                               TextColor="{StaticResource Gray900}"/>
                                        <Label Text="View and update assigned orders" 
                                               FontSize="12" 
                                               TextColor="{StaticResource Gray600}"/>
                                    </VerticalStackLayout>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Login Button -->
                        <Button Text="{Binding SignInButtonText}" 
                                Command="{Binding LoginCommand}"
                                Background="{StaticResource PurplePinkGradient}"
                                TextColor="{StaticResource White}"
                                FontSize="15"
                                FontAttributes="Bold"
                                HeightRequest="48"
                                CornerRadius="8"
                                Margin="0,8,0,0"/>

                        <!-- Demo Info -->
                        <Border BackgroundColor="{StaticResource Blue50}" 
                                StrokeThickness="1"
                                Stroke="{StaticResource Blue200}"
                                Padding="12">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8" />
                            </Border.StrokeShape>
                            <Label FontSize="11" 
                                   TextColor="{StaticResource Blue800}"
                                   LineHeight="1.4">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Demo Mode: " FontAttributes="Bold"/>
                                        <Span Text="Select a role to explore different access levels. No password required."/>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                        </Border>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
