<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="OMS.Pages.ItemOptionsSheet"
    BackgroundColor="#80000000">
    <!-- Semi-transparent overlay -->
    <Grid>
        <Grid.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnBackgroundTapped"/>
        </Grid.GestureRecognizers>
        
        <!-- Bottom Sheet Dialog -->
        <Border BackgroundColor="White"
                StrokeThickness="0"
                VerticalOptions="End"
                HorizontalOptions="Fill">
            <Border.GestureRecognizers>
                <TapGestureRecognizer />
            </Border.GestureRecognizers>
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="16,16,0,0" />
            </Border.StrokeShape>
            
            <VerticalStackLayout Padding="24,16" Spacing="0">
                <!-- Handle Bar -->
                <BoxView WidthRequest="40"
                         HeightRequest="4"
                         CornerRadius="2"
                         BackgroundColor="{StaticResource Gray300}"
                         HorizontalOptions="Center"
                         Margin="0,0,0,16"/>
                
                <!-- Header -->
                <Label Text="Choose Action" 
                       FontSize="18"
                       FontAttributes="Bold" 
                       TextColor="{StaticResource Gray900}"
                       Margin="0,0,0,16"/>
                
                <!-- Edit Option -->
                <Border Padding="16,12"
                        BackgroundColor="Transparent"
                        StrokeThickness="0"
                        x:Name="EditOption">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnEditTapped" />
                    </Border.GestureRecognizers>
                    <Border.Triggers>
                        <DataTrigger TargetType="Border" Binding="{Binding Source={x:Reference EditOption}}" Value="True">
                            <Setter Property="BackgroundColor" Value="{StaticResource Gray50}" />
                        </DataTrigger>
                    </Border.Triggers>
                    <HorizontalStackLayout Spacing="16">
                        <Label Text="✏️" 
                               FontSize="24"
                               FontFamily="{OnPlatform Android='sans-serif'}"
                               VerticalOptions="Center"/>
                        <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                            <Label Text="Edit" 
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Gray900}"/>
                            <Label Text="Modify this item" 
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </Border>
                
                <!-- Divider -->
                <BoxView HeightRequest="1" 
                         BackgroundColor="{StaticResource Gray100}"
                         Margin="16,8"/>
                
                <!-- Delete Option -->
                <Border Padding="16,12"
                        BackgroundColor="Transparent"
                        StrokeThickness="0"
                        x:Name="DeleteOption">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDeleteTapped" />
                    </Border.GestureRecognizers>
                    <Border.Triggers>
                        <DataTrigger TargetType="Border" Binding="{Binding Source={x:Reference DeleteOption}}" Value="True">
                            <Setter Property="BackgroundColor" Value="{StaticResource Pink100}" />
                        </DataTrigger>
                    </Border.Triggers>
                    <HorizontalStackLayout Spacing="16">
                        <Label Text="🗑️" 
                               FontSize="24"
                               FontFamily="{OnPlatform Android='sans-serif'}"
                               VerticalOptions="Center"/>
                        <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                            <Label Text="Delete" 
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource Pink600}"/>
                            <Label Text="Remove this item permanently" 
                                   FontSize="12"
                                   TextColor="{StaticResource Gray600}"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </Border>
                
                <!-- Cancel Button -->
                <Button Text="Cancel"
                        Clicked="OnCancelClicked"
                        BackgroundColor="{StaticResource Gray100}"
                        TextColor="{StaticResource Gray900}"
                        CornerRadius="12"
                        Margin="0,16,0,8"
                        HeightRequest="48"
                        FontSize="16"
                        FontAttributes="Bold"/>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>
